/*! Raygun4js - v2.18.3 - 2020-04-03
* https://github.com/MindscapeHQ/raygun4js
* Copyright (c) 2020 MindscapeHQ; Licensed MIT */

!function(U){var p,s,t,i,u,c,r,a,f={},e=U.TraceKit,o=[].slice,h="?";function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){return void 0===e}function d(e,t){var n=null;if(!t||f.collectWindowErrors){for(var r in i)if(S(i,r))try{i[r].apply(null,[e].concat(o.call(arguments,2)))}catch(e){n=e}if(n)throw n}}function n(e,t,n,r,i){var a=null;if(i)a=f.computeStackTrace(i);else if(c)f.computeStackTrace.augmentStackTraceWithInitialElement(c,t,n,e),a=c,u=c=null;else{var o={url:t,line:n,column:r};o.func=f.computeStackTrace.guessFunctionName(o.url,o.line),o.context=f.computeStackTrace.gatherContext(o.url,o.line),a={mode:"onerror",message:e,url:document.location.href,stack:[o],useragent:navigator.userAgent}}return d(a,"from window.onerror"),!!s&&s.apply(this,arguments)}function g(e){var t;if("undefined"!=typeof document&&(t=o.call(arguments,1)),c){if(u===e)return;var n=c;d.apply(u=c=null,[n,null].concat(t))}var r=f.computeStackTrace(e);if(c=r,u=e,U.setTimeout(function(){u===e&&d.apply(u=c=null,[r,null].concat(t))},r.incomplete?2e3:0),!p.Utilities.isReactNative())throw e}function R(e){if(!S(a,e)){var t,n="";e=e||"",t="undefined"!=typeof document?document.domain:U.location.hostname,e.indexOf&&-1!==e.indexOf(t)&&(n="string"!=typeof e?[]:""),a[e]=n?n.split("\n"):[]}return a[e]}function k(e,t){var n,r=/function ([^(]*)\(([^)]*)\)/,i=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,a="",o=R(e);if(!o.length)return h;for(var s=0;s<10;++s)if(!l(a=o[t-s]+a)){if(n=i.exec(a))return n[1];if(n=r.exec(a))return n[1]}return h}function w(e,t){var n=R(e);if(!n.length)return null;var r=[],i=Math.floor(f.linesOfContext/2),a=i+f.linesOfContext%2,o=Math.max(0,t-i-1),s=Math.min(n.length,t+a-1);--t;for(var u=o;u<s;++u)l(n[u])||r.push(n[u]);return 0<r.length?r:null}function m(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function x(e){return m(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function E(e,t){for(var n,r,i=0,a=t.length;i<a;++i)if((n=R(t[i])).length&&(n=n.join("\n"),r=e.exec(n)))return{url:t[i],line:n.substring(0,r.index).split("\n").length,column:r.index-n.lastIndexOf("\n",r.index)-1};return null}function v(e,t,n){var r,i=R(t),a=new RegExp("\\b"+m(e)+"\\b");return--n,i&&i.length>n&&(r=a.exec(i[n]))?r.index:null}function b(e){for(var t,n,r,i,a=[U.location.href],o=document.getElementsByTagName("script"),s=""+e,u=0;u<o.length;++u){var c=o[u];c.src&&a.push(c.src)}if(r=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(s)){var l=r[1]?"\\s+"+r[1]:"",d=r[2].split(",").join("\\s*,\\s*");t=m(r[3]).replace(/;$/,";?"),n=new RegExp("function"+l+"\\s*\\(\\s*"+d+"\\s*\\)\\s*{\\s*"+t+"\\s*}")}else n=new RegExp(m(s).replace(/\s+/g,"\\s+"));if(i=E(n,a))return i;if(r=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(s)){var f=r[1];if(t=x(r[2]),i=E(n=new RegExp("on"+f+"=[\\'\"]\\s*"+t+"\\s*[\\'\"]","i"),a[0]))return i;if(i=E(n=new RegExp(t),a))return i}return null}function y(e,t,n,r){var i={url:t,line:n};if(i.url&&i.line){e.incomplete=!1,i.func||(i.func=k(i.url,i.line)),i.context||(i.context=w(i.url,i.line));var a=/ '([^']+)' /.exec(r);if(a&&(i.column=v(a[1],i.url,i.line)),0<e.stack.length&&e.stack[0].url===i.url){if(e.stack[0].line===i.line)return!1;if(!e.stack[0].line&&e.stack[0].func===i.func)return e.stack[0].line=i.line,e.stack[0].context=i.context,!1}return e.stack.unshift(i),e.partial=!0}return!(e.incomplete=!0)}function A(e,t){for(var n,r,i,a=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,o=[],s={},u=!1,c=A.caller;c&&!u;c=c.caller)if(c!==C&&c!==f.report){if(r={url:null,func:h,line:null,column:null},c.name?r.func=c.name:(n=a.exec(c.toString()))&&(r.func=n[1]),void 0===r.func)try{r.func=n.input.substring(0,n.input.indexOf("{"))}catch(e){}if(i=b(c)){r.url=i.url,r.line=i.line,r.func===h&&(r.func=k(r.url,r.line));var l=/ '([^']+)' /.exec(e.message||e.description);l&&(r.column=v(l[1],i.url,i.line))}s[""+c]?u=!0:s[""+c]=!0,o.push(r)}t&&o.splice(0,t);var d={mode:"callers",name:e.name,message:e.message,url:document.location.href,stack:o,useragent:navigator.userAgent};return y(d,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),d}function C(e,t){var n=null;t=null==t?0:+t;try{if(n=function(e){for(var t,n=e.stacktrace,r=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,i=n?n.split("\n"):[],a=[],o=0,s=i.length;o<s;o+=2)if(t=r.exec(i[o])){var u={line:+t[1],column:+t[2],func:t[3]||t[4],args:t[5]?t[5].split(","):[],url:t[6]};if(!u.func&&u.line&&(u.func=k(u.url,u.line)),u.line)try{u.context=w(u.url,u.line)}catch(e){}u.context||(u.context=[i[o+1]]),a.push(u)}return a.length?{mode:"stacktrace",name:e.name,message:e.message,url:document.location.href,stack:a,useragent:navigator.userAgent,stackstring:n}:null}(e))return n}catch(e){if(r)throw e}try{if(n=function(e){if(!e.stack)return null;var t,n,r=/^\s*at (.*?) ?\(((?:file|https?|\s*|blob|chrome-extension|native|webpack|eval|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,i=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,o=e.stack.split("\n"),s=[],u=/^(.*) is undefined$/.exec(e.message);if(p.Utilities.isReactNative())for(var c=/^(.*@)?.*\/[^\.]+(\.app|CodePush)\/?(.*)/,l=0;l<o.length;l++)if(null!==(t=c.exec(o[l]))){var d=t[1]?t[1]:"anonymous@",f=t[3];o[l]=d+"file://reactnative.local/"+f}l=0;for(var g=o.length;l<g;++l){if(t=i.exec(o[l]))n={url:t[3],func:t[1]||h,args:t[2]?t[2].split(","):"",line:+t[4],column:t[5]?+t[5]:null};else if(t=r.exec(o[l]))n={url:t[2],func:t[1]||h,line:+t[3],column:t[4]?+t[4]:null};else{if(!(t=a.exec(o[l])))continue;n={url:t[2],func:t[1]||h,line:+t[3],column:t[4]?+t[4]:null}}!n.func&&n.line&&(n.func=k(n.url,n.line)),"undefined"!=typeof document&&n.line&&(n.context=w(n.url,n.line)),s.push(n)}return s[0]&&s[0].line&&!s[0].column&&u?s[0].column=v(u[1],s[0].url,s[0].line):s[0].column||void 0===e.columnNumber||(s[0].column=e.columnNumber+1),s.length?{mode:"stack",name:e?e.name:"",message:e?e.message:"",url:"undefined"!=typeof document?document.location.href:"",stack:s,useragent:navigator?navigator.userAgent:"",stackstring:e&&e.stack?e.stack.toString():""}:null}(e))return n}catch(e){if(r)throw e}try{if(n=function(e){var t=e.message.split("\n");if(t.length<4)return null;var n,r,i,a,o=/^\s*Line (\d+) of linked script ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,s=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,u=/^\s*Line (\d+) of function script\s*$/i,c=[],l=document.getElementsByTagName("script"),d=[];for(r in l)S(l,r)&&!l[r].src&&d.push(l[r]);for(r=2,i=t.length;r<i;r+=2){var f=null;if(n=o.exec(t[r]))f={url:n[2],func:n[3],line:+n[1]};else if(n=s.exec(t[r])){f={url:n[3],func:n[4]};var g=+n[1],p=d[n[2]-1];if(p&&(a=R(f.url))){var h=(a=a.join("\n")).indexOf(p.innerText);0<=h&&(f.line=g+a.substring(0,h).split("\n").length)}}else if(n=u.exec(t[r])){var m=U.location.href.replace(/#.*$/,""),v=n[1];f={url:m,line:(a=E(new RegExp(x(t[r+1])),[m]))?a.line:v,func:""}}if(f){f.func||(f.func=k(f.url,f.line));var b=w(f.url,f.line),y=b?b[Math.floor(b.length/2)]:null;b&&y.replace(/^\s*/,"")===t[r+1].replace(/^\s*/,"")?f.context=b:f.context=[t[r+1]],c.push(f)}}return c.length?{mode:"multiline",name:e.name,message:t[0],url:document.location.href,stack:c,useragent:navigator.userAgent}:null}(e))return n}catch(e){if(r)throw e}try{if(n=A(e,t+1))return n}catch(e){if(r)throw e}return{tracekitResult:"failedToComputeAnyStackTrace"}}f.setRaygun=function(e){p=p||e},f.noConflict=function(){return U.TraceKit=e,f},f.wrap=function(e){return function(){try{return e.apply(this,arguments)}catch(e){throw f.report(e),e}}},f.report=(i=[],c=u=null,g.subscribe=function(e){!0!==t&&(s=U.onerror,U.onerror=n,t=!0),i.push(e)},g.unsubscribe=function(e){for(var t=i.length-1;0<=t;--t)i[t]===e&&i.splice(t,1)},g),f.computeStackTrace=(r=!1,a={},C.augmentStackTraceWithInitialElement=y,C.guessFunctionName=k,C.gatherContext=w,C.ofCaller=function(t){t=1+(null==t?0:+t);try{throw new Error}catch(e){return C(e,t+1)}},C),f.extendToAsynchronousCallbacks=function(){function e(e){var n=U[e];U[e]=function(){var e=o.call(arguments),t=e[0];return"function"==typeof t&&(e[0]=f.wrap(t)),n.apply?n.apply(this,e):n(e[0],e[1])}}e("setTimeout"),e("setInterval")},f.remoteFetching||(f.remoteFetching=!0),f.collectWindowErrors||(f.collectWindowErrors=!0),(!f.linesOfContext||f.linesOfContext<1)&&(f.linesOfContext=11),U.TraceKit=f}(window),function(o,s){"use strict";if(o&&o.event&&o.event.add){var u=o.event.add;o.event.add=function(e,t,n,r,i){return"function"!=typeof n&&"function"!=typeof n.handler||(n.handler?(a=n.handler,n.handler=s.wrap(n.handler)):(a=n,n=s.wrap(n)),a.guid?n.guid=a.guid:n.guid=a.guid=o.guid++),u.call(this,e,t,n,r,i);var a};var t=o.fn.ready;o.fn.ready=function(e){return t.call(this,s.wrap(e))};var i=o.ajax;o.ajax=function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};for(var n,r=["complete","error","success"];n=r.pop();)o.isFunction(t[n])&&(t[n]=s.wrap(t[n]));try{return e?i.call(this,e,t):i.call(this,t)}catch(e){throw s.report(e),e}}}}(window.jQuery,window.TraceKit),Date.prototype.toISOString||function(){function e(e){var t=String(e);return 1===t.length&&(t="0"+t),t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0==i)return-1;var a=0|t;if(i<=a)return-1;for(n=Math.max(0<=a?a:i-Math.abs(a),0);n<i;){if(n in r&&r[n]===e)return n;n++}return-1}),Array.prototype.map||(Array.prototype.map=function(e){var t,n,r;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),a=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(t=arguments[1]),n=new Array(a),r=0;r<a;){var o,s;r in i&&(o=i[r],s=e.call(t,o,r,i),n[r]=s),r++}return n}),Array.prototype.forEach||(Array.prototype.forEach=function(e){var t,n;if(null==this)throw new TypeError("this is null or not defined");var r=Object(this),i=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(t=arguments[1]),n=0;n<i;){var a;n in r&&(a=r[n],e.call(t,a,n,r)),n++}}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function t(){}function n(){return i.apply(this instanceof t&&e?this:e,r.concat(Array.prototype.slice.call(arguments)))}var r=Array.prototype.slice.call(arguments,1),i=this;return t.prototype=this.prototype,n.prototype=new t,n}),window.raygunUtilityFactory=function(p,n){var r,e={getUuid:function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()},createCookie:function(e,t,n,r){if(!this.isReactNative()){var i;if(n){var a=new Date;a.setTime(a.getTime()+60*n*60*1e3),i="; expires="+a.toGMTString()}else i="";var o=r?"; secure":"";document.cookie=e+"="+t+i+"; path=/"+o}},readCookie:function(e){if(this.isReactNative())return"none";for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},clearCookie:function(e){this.isReactNative()||this.createCookie(e,"",-1)},log:function(e,t){n.Options._debugMode&&p.console&&p.console.log&&(p.console.log(e),t&&p.console.log(t))},isApiKeyConfigured:function(){return!(!n.Options._raygunApiKey||""===n.Options._raygunApiKey)||(n.Utilities.log("Raygun API key has not been configured, make sure you call Raygun.init(yourApiKey)"),!1)},isReactNative:function(){return"undefined"==typeof document&&"undefined"!=typeof __DEV__},defaultReactNativeGlobalHandler:function(e,t){"function"==typeof r&&r(e,t)},localStorageAvailable:function(){try{return"localStorage"in p&&null!==p.localStorage}catch(e){return!1}},sessionStorageAvailable:function(){try{return"sessionStorage"in p&&null!==p.sessionStorage}catch(e){return!1}},truncateURL:function(e){var t=e,n=e.split("//")[1];if(n){var r=n.indexOf("?"),i=n.toString().substring(0,r),a=i.split("/").slice(0,4).join("/"),o=i.substring(0,48);(t=a.length<o.length?a:o)!==i&&(t+="..")}return t},merge:function(e,t){var n,r={};for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r},mergeMutate:function(e,t){var n;for(n in t)e[n]=t[n];return e},mergeArray:function(e,t){return null!=t?e.concat(t):e.slice(0)},forEach:function(e,t){for(var n=0;n<e.length;n++)t.call(null,n,e[n])},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},contains:function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},getRandomInt:function(){return Math.floor(9007199254740992*Math.random())},getViewPort:function(){if(this.isReactNative())return{width:"Not available",height:"Not available"};var e=document.documentElement,t=document.getElementsByTagName("body")[0];return{width:p.innerWidth||e.clientWidth||t.clientWidth,height:p.innerHeight||e.clientHeight||t.clientHeight}},parseUrl:function(e,t){function g(e){return!isNaN(parseFloat(e))&&isFinite(e)}return function(e,t){if("undefined"==typeof document)return"";var n=t||p.location.toString();if(!e)return n;e=e.toString(),"//"===n.substring(0,2)?n="http:"+n:1===n.split("://").length&&(n="http://"+n);var r={auth:""},i=(t=n.split("/"))[2].split("@");i=1===i.length?i[0].split(":"):(r.auth=i[0],i[1].split(":")),r.protocol=t[0],r.hostname=i[0],r.port=i[1]||("https"===r.protocol.split(":")[0].toLowerCase()?"443":"80"),r.pathname=(3<t.length?"/":"")+t.slice(3,t.length).join("/").split("?")[0].split("#")[0];var a=r.pathname;"/"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));var o=r.hostname,s=o.split("."),u=a.split("/");if("hostname"===e)return o;if("domain"===e)return/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/.test(o)?o:s.slice(-2).join(".");if("sub"===e)return s.slice(0,s.length-2).join(".");if("port"===e)return r.port;if("protocol"===e)return r.protocol.split(":")[0];if("auth"===e)return r.auth;if("user"===e)return r.auth.split(":")[0];if("pass"===e)return r.auth.split(":")[1]||"";if("path"===e)return r.pathname;if("."===e.charAt(0)){if(g(e=e.substring(1)))return s[(e=parseInt(e,10))<0?s.length+e:e-1]||""}else{if(g(e))return u[(e=parseInt(e,10))<0?u.length+e:e]||"";if("file"===e)return u.slice(-1)[0];if("filename"===e)return u.slice(-1)[0].split(".")[0];if("fileext"===e)return u.slice(-1)[0].split(".")[1]||"";if("?"===e.charAt(0)||"#"===e.charAt(0)){var c=n,l=null;if("?"===e.charAt(0)?c=(c.split("?")[1]||"").split("#")[0]:"#"===e.charAt(0)&&(c=c.split("#")[1]||""),!e.charAt(1))return c;e=e.substring(1);for(var d=0,f=(c=c.split("&")).length;d<f;d++)if((l=c[d].split("="))[0]===e)return l[1]||"";return null}}return""}(e,t)},enhance:function(e,t,n){var r=e[t];return e[t]=function(){n.apply(this,arguments),"function"==typeof r&&r.apply(this,arguments)},function(){e[t]=r}},addEventHandler:function(e,t,n,r){var i=r||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n,function(){e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=function(){}}},nodeText:function(e){var t=e.textContent||e.innerText||"";return-1!==["submit","button"].indexOf(e.type)&&(t=e.value||t),t=t.replace(/^\s+|\s+$/g,"")},nodeSelector:function(e){var t=[e.tagName];return e.id&&t.push("#"+e.id),e.className&&e.className.length&&t.push("."+e.className.split(" ").join(".")),t.join("")},truncate:function(e,t){return e.length>t?e.slice(0,t-"(...)".length)+"(...)":e},getOrigin:function(){return p.location.origin?p.location.origin:p.location.protocol+"//"+p.location.hostname+(p.location.port?":"+p.location.port:"")},resolveFullUrl:function(e){if(e&&0===e.indexOf("//")&&(e=p.location.protocol+e),e&&p.location.pathname&&-1===e.indexOf("://")){var t=this.getOrigin();if(0===e.indexOf("/"))return t+e;var n=p.location.pathname.split("/");return n.pop(),t+n.join("/")+"/"+e}return e},removeFromArray:function(e,t){for(var n=[],r=0;r<e.length;r++)e[r]!==t&&n.push(e[r]);return n},isIE:function(){return-1<p.navigator.userAgent.indexOf("Trident")||-1<p.navigator.userAgent.indexOf("MSIE")}};return e.isReactNative()&&!0!==__DEV__&&p.ErrorUtils&&p.ErrorUtils.getGlobalHandler&&(r=p.ErrorUtils.getGlobalHandler()),e},window.raygunNetworkTrackingFactory=function(l,d){function n(){this.requestHandlers=[],this.responseHandlers=[],this.errorHandlers=[],this.wrapWithHandler=function(e){return function(){try{return e.apply(this,arguments)}catch(e){d.Utilities.log(e)}}},this.executeHandlers=this.wrapWithHandler(function(e,t){for(var n=0;n<e.length;n++)e[n](JSON.parse(JSON.stringify(t)))}),this.wrapPrototypeWithHandlers(),this.attach()}return n.prototype.on=function(e,t){switch(e){case"request":this.requestHandlers.push(t);break;case"response":this.responseHandlers.push(t);break;case"error":this.errorHandlers.push(t)}},n.prototype.off=function(e,t){switch(e){case"request":this.requestHandlers=d.Utilities.removeFromArray(this.requestHandlers,t);break;case"response":this.responseHandlers=d.Utilities.removeFromArray(this.responseHandlers,t);break;case"error":this.errorHandlers=d.Utilities.removeFromArray(this.errorHandlers,t)}},n.prototype.attach=function(){var u=this;l.XMLHttpRequest.prototype.addEventListener&&d.Utilities.enhance(l.XMLHttpRequest.prototype,"open",u.wrapWithHandler(function(){var t=(new Date).getTime(),n=d.Utilities.resolveFullUrl(arguments[1])||"Unknown",r=n.split("?")[0],i=arguments[0];d.Utilities.enhance(this,"send",u.wrapWithHandler(function(){var e={method:i,requestURL:n,baseUrl:r};arguments[0]&&"string"==typeof arguments[0]&&(e.body=arguments[0]),u.executeHandlers(u.requestHandlers,e)})),this.addEventListener("load",u.wrapWithHandler(function(){var e="N/A for non text responses";""!==this.responseType&&"text"!==this.responseType||(e=this.responseText),d.Utilities.log("Tracking XHR response for",n),u.executeHandlers(u.responseHandlers,{status:this.status,requestURL:n,responseURL:this.responseURL,baseUrl:r,body:e,duration:(new Date).getTime()-t})})),this.addEventListener("error",u.wrapWithHandler(function(){u.executeHandlers(u.errorHandlers,{requestURL:n,responseURL:this.responseURL,duration:(new Date).getTime()-t})}))}));var c=l.__raygunOriginalFetch||l.fetch;if("function"==typeof c&&void 0===c.polyfill&&!d.Utilities.isIE()){function e(){var i,a,e=arguments[0],t=arguments[1],n=t&&t.method||"GET",o=(new Date).getTime();"string"==typeof e?i=e:void 0!==l.Request&&e instanceof l.Request?(i=e.url,e.method&&(n=e.method)):i=String(e),i=d.Utilities.resolveFullUrl(i),a=i.split("?")[0];var r=c.apply(null,arguments);try{var s={method:n,requestURL:i,baseUrl:a};t&&t.body&&(s.body=t.body),u.executeHandlers(u.requestHandlers,s),r.then(u.wrapWithHandler(function(e){var t="N/A when the fetch response does not support clone()",n="function"==typeof e.clone?e.clone():void 0;function r(){d.Utilities.log("tracking fetch response for",i),u.executeHandlers(u.responseHandlers,{status:e.status,requestURL:i,responseURL:e.url,body:t,baseUrl:a,duration:(new Date).getTime()-o})}if(n)try{n.text().then(function(e){t=d.Utilities.truncate(e,500),r()}).catch(function(){r()})}catch(e){r()}else r()})),r.catch(u.wrapWithHandler(function(e){u.executeHandlers(u.errorHandlers,{metadata:{requestUrl:i,error:e.toString(),duration:(new Date).getTime()-o}})}))}catch(e){d.Utilities.log(e)}return r}l.__raygunOriginalFetch?l.__raygunFetchCallback=e:l.fetch=e,0}},n.prototype.wrapPrototypeWithHandlers=function(){var e,t;for(e in n.prototype)"function"==typeof(t=n.prototype[e])&&(n.prototype[e]=this.wrapWithHandler(t))},new n},window.raygunBreadcrumbsFactory=function(o,a){function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("string"==typeof r&&e&&-1<e.indexOf(r))return!0;if("object"==typeof r&&r.exec(e))return!0}return!1}function n(){this.MAX_BREADCRUMBS=32,this.MAX_MESSAGE_SIZE=1024,this.BREADCRUMB_LEVELS=["debug","info","warning","error"],this.DEFAULT_BREADCRUMB_LEVEL="info",this.DEFAULT_XHR_IGNORED_HOSTS=["raygun"],this.breadcrumbLevel="info",this.logXhrContents=!1,this.xhrIgnoredHosts=[].concat(this.DEFAULT_XHR_IGNORED_HOSTS),this.breadcrumbs=[],this.wrapWithHandler=function(e){return function(){try{return e.apply(this,arguments)}catch(e){a.Utilities.log(e)}}},this.disableConsoleFunctions=[],this.disableNavigationFunctions=[],this.disableXHRLogging=function(){},this.disableClicksTracking=function(){},this.enableAutoBreadcrumbs(),this.wrapPrototypeWithHandlers()}return n.prototype.recordBreadcrumb=function(e,t){var n={level:this.DEFAULT_BREADCRUMB_LEVEL,timestamp:(new Date).getTime(),type:"manual"};switch(typeof e){case"object":n=a.Utilities.merge(n,e);break;case"string":n=a.Utilities.merge(a.Utilities.merge(n,{message:e,metadata:t}));break;default:return void a.Utilities.log("expected first argument to recordBreadcrumb to be a 'string' or 'object', got "+typeof e)}-1===this.BREADCRUMB_LEVELS.indexOf(n.level)&&(a.Utilities.log("unknown breadcrumb level "+n.level+" setting to default of '"+this.DEFAULT_BREADCRUMB_LEVEL+"'"),n.level=this.DEFAULT_BREADCRUMB_LEVEL),this.shouldRecord(n)&&(n.message=a.Utilities.truncate(n.message,this.MAX_MESSAGE_SIZE),this.breadcrumbs.push(n),this.breadcrumbs=this.breadcrumbs.slice(-this.MAX_BREADCRUMBS))},n.prototype.shouldRecord=function(e){var t=this.BREADCRUMB_LEVELS.indexOf(e.level);return this.BREADCRUMB_LEVELS.indexOf(this.breadcrumbLevel)<=t},n.prototype.setBreadcrumbLevel=function(e){-1!==this.BREADCRUMB_LEVELS.indexOf(e)?this.breadcrumbLevel=e:a.Utilities.log("Breadcrumb level of '"+e+"' is invalid, setting to default of '"+this.DEFAULT_BREADCRUMB_LEVEL+"'")},n.prototype.setOption=function(e,t){if("breadcrumbsLevel"===e)this.setBreadcrumbLevel(t);else if("xhrIgnoredHosts"===e){this.xhrIgnoredHosts=t.concat(this.DEFAULT_XHR_IGNORED_HOSTS);var n=this;this.removeBreadcrumbsWithPredicate(function(e){return"request"===e.type&&i(e.metadata.requestURL||e.metadata.responseURL,n.xhrIgnoredHosts)})}else"logXhrContents"===e&&(this.logXhrContents=t)},n.prototype.any=function(){return 0<this.breadcrumbs.length},n.prototype.all=function(){for(var e=[],t=0;t<this.breadcrumbs.length;t++){var n=this.breadcrumbs[t];n&&"request"===n.type&&!this.logXhrContents&&n.metadata&&n.metadata.body&&(n.metadata.body="Disabled because logContentsOfXhrCalls has not been enabled"),e.push(n)}return e},n.prototype.enableAutoBreadcrumbs=function(){this.enableAutoBreadcrumbsXHR(),this.enableAutoBreadcrumbsClicks(),this.enableAutoBreadcrumbsConsole(),this.enableAutoBreadcrumbsNavigation()},n.prototype.disableAutoBreadcrumbs=function(){this.disableAutoBreadcrumbsXHR(),this.disableAutoBreadcrumbsClicks(),this.disableAutoBreadcrumbsConsole(),this.disableAutoBreadcrumbsNavigation()},n.prototype.removeBreadcrumbsWithPredicate=function(e){for(var t=this.breadcrumbs,n=[],r=0;r<t.length;r++){var i=t[r];e(i)||n.push(i)}this.breadcrumbs=n},n.prototype.removeCrumbsOfType=function(t){this.removeBreadcrumbsWithPredicate(function(e){return e.type===t})},n.prototype.enableAutoBreadcrumbsConsole=function(){if(void 0!==o.console){var t=function(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r];null!=i&&n.push(i.toString())}this.recordBreadcrumb({type:"console",level:e,message:Array.prototype.slice.call(n).join(", ")})}.bind(this),n=this;this.disableConsoleFunctions=["log","warn","error"].map(function(e){return a.Utilities.enhance(console,e,n.wrapWithHandler(function(){t("log"===e?"info":"warn"===e?"warning":"error",arguments)}))})}},n.prototype.disableAutoBreadcrumbsConsole=function(){this.disableConsoleFunctions.forEach(function(e){e()}),this.removeCrumbsOfType("console")},n.prototype.enableAutoBreadcrumbsNavigation=function(){if(o.addEventListener&&o.history&&o.history.pushState){function r(e){return e.split("#")[1]||""}var i=function(e,t,n,r){var i=location.pathname+location.search+location.hash,a=null;return o.history.state&&(a=history.state),{message:"History "+e,type:"navigation",level:"info",metadata:{from:i,to:r||i,prevState:JSON.stringify(a)||"unsupported",nextState:JSON.stringify(t)}}}.bind(this);this.disableNavigationFunctions=this.disableNavigationFunctions.concat(["pushState","replaceState"].map(function(r){return a.Utilities.enhance(history,r,this.wrapWithHandler(function(e,t,n){this.recordBreadcrumb(i(r,e,t,n))}.bind(this)))}.bind(this)));var t=function(e){return this.wrapWithHandler(function(){this.recordBreadcrumb(e.apply(null,arguments))}.bind(this))}.bind(this),e=[{element:o,event:"hashchange",handler:function(e){var t=e.oldURL,n=e.newURL;return{type:"navigation",message:"Hash change",metadata:t&&n?{from:r(t),to:r(n)}:{to:location.hash}}}},{element:o,event:"load",handler:function(){return{type:"navigation",message:"Page loaded"}}},{element:o,event:"popstate",handler:function(){return{type:"navigation",message:"Navigated back"}}},{element:o,event:"pagehide",handler:function(){return{type:"navigation",message:"Page hidden"}}},{element:o,event:"pageshow",handler:function(){return{type:"navigation",message:"Page shown"}}},{element:document,event:"DOMContentLoaded",handler:function(){return{type:"navigation",message:"DOMContentLoaded"}}}];this.disableNavigationFunctions=this.disableNavigationFunctions.concat(e.map(function(e){return a.Utilities.addEventHandler(e.element,e.event,t(e.handler))}.bind(this)))}},n.prototype.disableAutoBreadcrumbsNavigation=function(){this.disableNavigationFunctions.forEach(function(e){e()}),this.disableNavigationFunctions=[],this.removeCrumbsOfType("navigation")},n.prototype.enableAutoBreadcrumbsClicks=function(){this.disableClicksTracking=a.Utilities.addEventHandler(o,"click",this.wrapWithHandler(function(e){var t,n;try{t=a.Utilities.truncate(a.Utilities.nodeText(e.target),150),n=a.Utilities.nodeSelector(e.target)}catch(e){n=t="[unknown]",a.Utilities.log("Error retrieving node text/selector. Most likely due to a cross domain error")}this.recordBreadcrumb({type:"click-event",message:"UI Click",level:"info",metadata:{text:t,selector:n}})}.bind(this),!0))},n.prototype.disableAutoBreadcrumbsClicks=function(){this.disableClicksTracking(),this.removeCrumbsOfType("click-event")},n.prototype.enableAutoBreadcrumbsXHR=function(){var t=this,e=t.wrapWithHandler(function(e){i(e.url,t.xhrIgnoredHosts)||(e.body&&(e.body=a.Utilities.truncate(e.body,500)),t.recordBreadcrumb({type:"request",message:"Opening request to "+e.requestURL,level:"info",metadata:e}))}),n=t.wrapWithHandler(function(e){i(e.requestURL,t.xhrIgnoredHosts)||i(e.responseURL,t.xhrIgnoredHosts)||(e.body&&(e.body=a.Utilities.truncate(e.body,500)),e.duration=e.duration+"ms",t.recordBreadcrumb({type:"request",message:"Finished request to "+e.requestURL,level:"info",metadata:e}))}),r=t.wrapWithHandler(function(e){i(e.requestURL,t.xhrIgnoredHosts)||(e.duration=e.duration+"ms",t.recordBreadcrumb({type:"request",message:"Failed request to "+e.requestUrl,level:"info",metadata:e}))});a.NetworkTracking.on("request",e),a.NetworkTracking.on("response",n),a.NetworkTracking.on("error",r),this.disableXHRLogging=function(){a.NetworkTracking.off("request",e),a.NetworkTracking.off("response",n),a.NetworkTracking.off("error",r)}},n.prototype.disableAutoBreadcrumbsXHR=function(){this.disableXHRLogging(),this.removeCrumbsOfType("request")},n.prototype.wrapPrototypeWithHandlers=function(){var e,t;for(e in n.prototype)"function"==typeof(t=n.prototype[e])&&(n.prototype[e]=this.wrapWithHandler(t))},n};var raygunFactory=function(k,r,w){var x={};x.Utilities=raygunUtilityFactory(k,x),x.NetworkTracking=raygunNetworkTrackingFactory(k,x),x.Breadcrumbs=raygunBreadcrumbsFactory(k,x);var E,A,i,C,t,T,u,a,o,s,c,e,O={LOADING:0,READY:1},l="raygun4js-userid",d=TraceKit,n=k.Raygun,f=!1,g=!1,p=!1,h=!1,m=!1,N=!1,v=!1,b=!1,y=!0,U=!1,B={},L=[],H=[],S="https://api.raygun.io",D=null,I=null,M="customData",R=null,q=new x.Breadcrumbs,F=null,_=!0,P=O.LOADING,j=[],X=[],V=null,W=!0,J=!1,K=!1,$={Rand:Math.random(),Options:{},noConflict:function(){return n&&(k.Raygun=n),x},constructNewRaygun:function(){return raygunFactory(k,k.jQuery)},init:function(e,t,n){return d.remoteFetching=!1,this.Options._raygunApiKey=e,n&&(B=n),r&&(s=r(document)),t&&(g=t.allowInsecureSubmissions||!1,p=t.ignoreAjaxAbort||!1,h=t.ignoreAjaxError||!1,v=t.disableAnonymousUserTracking||!1,b=t.disableErrorTracking||!1,y=t.disablePulse===w||t.disablePulse,D=t.excludedHostnames||!1,I=t.excludedUserAgents||!1,F=t.pulseMaxVirtualPageDuration||null,_=t.pulseIgnoreUrlCasing||!1,V=t.pulseCustomLoadTimeEnabled||!1,J=t.setCookieAsSecure||!1,K=t.captureMissingRequests||!1,t.apiUrl&&(S=t.apiUrl),void 0!==t.wrapAsynchronousCallbacks&&(U=t.wrapAsynchronousCallbacks),void 0!==t.captureUnhandledRejections&&(W=t.captureUnhandledRejections),t.debugMode&&(f=t.debugMode),this.Options._debugMode=f,t.ignore3rdPartyErrors&&(N=!0),t.apiEndpoint&&(S=t.apiEndpoint),t.from&&(o=t.from),t.clientIp&&(c=t.clientIp)),E||v?Y():function(e){var t;if(x.Utilities.localStorageAvailable()&&null!==(t=localStorage.getItem(l)))return e(t);null!==(t=x.Utilities.readCookie(l))&&x.Utilities.localStorageAvailable()&&(x.Utilities.clearCookie(l),localStorage.setItem(l,t));e(t)}(Q),x},withCustomData:function(e){return B=e,x},withTags:function(e){return L=e,R!==w&&null!==R&&R.withTags(e),x},attach:function(){return!x.Utilities.isApiKeyConfigured()||b||(k.RaygunObject&&k[k.RaygunObject]&&k[k.RaygunObject].q&&(k.onerror=null),W&&(e=x.Utilities.addEventHandler(k,"unhandledrejection",z)),x.Utilities.isReactNative()&&!0!==__DEV__&&k.ErrorUtils&&k.ErrorUtils.setGlobalHandler&&k.ErrorUtils.setGlobalHandler(function(e,t){var n=a;a=function(){"function"==typeof n&&n(),x.Utilities.defaultReactNativeGlobalHandler(e,t),a=n},TraceKit.report(e)}),d.report.subscribe(ie),U&&d.extendToAsynchronousCallbacks(),s&&s.ajaxError&&!h&&s.ajaxError(re)),x},detach:function(){return d.report.unsubscribe(ie),s&&s.unbind("ajaxError",re),W&&e&&e(),x},send:function(t,e,n){if(b)return x.Utilities.log("Error not sent due to disabled error tracking"),x;try{ie(d.computeStackTrace(t),{customData:"function"==typeof B?x.Utilities.merge(B(),e):x.Utilities.merge(B,e),tags:"function"==typeof L?x.Utilities.mergeArray(L(),n):x.Utilities.mergeArray(L,n)},!0,t)}catch(e){if(t!==e)throw e}return x},setUser:function(e,t,n,r,i,a){return E={Identifier:e},"boolean"==typeof t&&(E.IsAnonymous=t),n&&(E.Email=n),r&&(E.FullName=r),i&&(E.FirstName=i),a&&(E.UUID=a),R!==w&&null!==R&&R.setUser(E),x},resetAnonymousUser:function(){x.Utilities.localStorageAvailable()?localStorage.removeItem(l):x.Utilities.clearCookie(l)},setVersion:function(e){return A=e,x},saveIfOffline:function(e){return void 0!==e&&"boolean"==typeof e&&(m=e),x},filterSensitiveData:function(e){return i=e,x},setFilterScope:function(e){return"customData"!==e&&"all"!==e||(M=e),x},whitelistCrossOriginDomains:function(e){return H=e,x},onBeforeSend:function(e){return C=e,x},onBeforeSendRum:function(e){return t=e,x},groupingKey:function(e){return T=e,x},onBeforeXHR:function(e){return u=e,x},onAfterSend:function(e){return a=e,x},endSession:function(){x.RealUserMonitoring!==w&&R&&R.endSession()},trackEvent:function(e,t){P===O.READY?x.RealUserMonitoring!==w&&R&&("pageView"===e&&t.path?R.virtualPageLoaded(t.path):"customTimings"===e&&t.timings&&R.sendCustomTimings(t.timings)):X.push({type:e,options:t})},setClientIp:function(e){c=e},captureMissingRequests:function(e){x.RealUserMonitoring!==w&&R&&R.captureMissingRequests(e)},recordBreadcrumb:function(){q.recordBreadcrumb.apply(q,arguments)},enableAutoBreadcrumbs:function(e){e?q["enableAutoBreadcrumbs"+e]():q.enableAutoBreadcrumbs()},disableAutoBreadcrumbs:function(e){e?q["disableAutoBreadcrumbs"+e]():q.disableAutoBreadcrumbs()},setBreadcrumbOption:function(e,t){q.setOption(e,t)},setBreadcrumbs:function(e){q=e},getBreadcrumbs:function(){return q.all()}};function G(e){"function"==typeof a&&a(e)}function Q(e){var t,n="Unknown";e?n=e:(n=x.Utilities.getUuid(),t=n,x.Utilities.localStorageAvailable()?localStorage.setItem(l,t):x.Utilities.createCookie(l,t,744,J)),x.setUser(n,!0,null,null,null,n),Y()}function z(e){var t=e.reason;!t&&e.detail&&e.detail.reason&&(t=e.detail.reason),t instanceof Error||!e.reason||!e.reason.error||(t=e.reason.error),t=t||e,$.send(t,null,["UnhandledPromiseRejection"])}function Y(){if(P!==O.READY){if(P=O.READY,x.RealUserMonitoring!==w&&!y){function e(){(R=new x.RealUserMonitoring(x.Options._raygunApiKey,S,oe,E,A,L,D,I,f,F,_,V,t,J,K)).attach()}x.Utilities.isReactNative()?x.Utilities.log("Not enabling RUM because Raygun4JS has detected a React Native environment, see #310 on Github"):"onLoad"===o?e():k.addEventListener?k.addEventListener("load",e):k.attachEvent("onload",e)}!function(){var e;for(e=0;e<j.length;e++)ie(j[e].stackTrace,j[e].options,j[e].userTriggered,j[e].error);for(j=[],e=0;e<X.length;e++)$.trackEvent(X[e].type,X[e].options);X=[]}(),ee()}}function Z(e,t){var n=(new Date).toJSON();try{var r="raygunjs+"+x.Options._raygunApiKey+"="+n+"="+x.Utilities.getRandomInt();void 0===localStorage[r]&&(localStorage[r]=JSON.stringify({url:e,data:t}))}catch(e){x.Utilities.log("Raygun4JS: LocalStorage full, cannot save exception")}}function ee(){if(x.Utilities.localStorageAvailable())for(var e in localStorage)if(-1<e.indexOf("raygunjs+"+x.Options._raygunApiKey)){try{var t=JSON.parse(localStorage[e]);oe(t.url,t.data)}catch(e){x.Utilities.log("Raygun4JS: Invalid JSON object in LocalStorage")}try{localStorage.removeItem(e)}catch(e){x.Utilities.log("Raygun4JS: Unable to remove error")}}}function te(e,t){if(i)for(var n=0;n<i.length;n++)if("object"==typeof i[n]&&"function"==typeof i[n].exec){var r=i[n].exec(e);if(null!==r&&r!==w)return"[removed by filter]"}else if(i[n]===e)return"[removed by filter]";return t}function ne(e,t){if(null==e)return e;if("[object Object]"!==Object.prototype.toString.call(e))return e;var n={};for(var r in e){var i=e[r];"[object Object]"===Object.prototype.toString.call(i)?n[r]="Details"!==t||"Client"!==r?ne(te(r,i),r):i:"[object Function]"!==Object.prototype.toString.call(i)&&(void 0!==t?n[r]=te(r,i):"OccurredOn"===r&&(n[r]=i))}return n}function re(e,t,n,r){var i="AJAX Error: "+(t.statusText||"unknown")+" "+(n.type||"unknown")+" "+(x.Utilities.truncateURL(n.url)||"unknown");(!p||0!==t.status&&t.getAllResponseHeaders())&&x.send(r||e.type,{status:t.status,statusText:t.statusText,type:n.type,url:n.url,ajaxErrorMessage:i,contentType:n.contentType,requestData:n.data&&n.data.slice?n.data.slice(0,10240):w,responseData:t.responseText&&t.responseText.slice?t.responseText.slice(0,10240):w,activeTarget:e.target&&e.target.activeElement&&e.target.activeElement.outerHTML&&e.target.activeElement.outerHTML.slice?e.target.activeElement.outerHTML.slice(0,10240):w})}function ie(e,t,n,r){if(P===O.READY){var i="Script error",a=[],o={};if(N){if(!e.stack||!e.stack.length)return void x.Utilities.log("Raygun4JS: Cancelling send due to null stacktrace");var s=x.Utilities.parseUrl("domain"),u=i;if(e.message?u=e.message:t&&t.status&&(u=t.status),void 0===u&&(u=i),!x.Utilities.isReactNative()&&"function"==typeof u.substring&&u.substring(0,i.length)===i&&null!==e.stack[0].url&&e.stack[0].url!==w&&-1===e.stack[0].url.indexOf(s)&&(0===e.stack[0].line||"?"===e.stack[0].func))return void x.Utilities.log("Raygun4JS: cancelling send due to third-party script error with no stacktrace and message");for(var c=!1,l=0;!c&&e.stack&&l<e.stack.length;l++)if(null!==e.stack[l]&&e.stack[l]!==w&&null!==e.stack[l].url&&e.stack[l].url!==w){for(var d in H)-1<e.stack[l].url.indexOf(H[d])&&(c=!0);-1<e.stack[l].url.indexOf(s)&&(c=!0)}if(!c)return void x.Utilities.log("Raygun4JS: cancelling send due to error on non-origin, non-whitelisted domain")}if(D instanceof Array)for(var f in D)if(D.hasOwnProperty(f)&&k.location.hostname&&k.location.hostname.match(D[f]))return void x.Utilities.log("Raygun4JS: cancelling send as error originates from an excluded hostname");if(I instanceof Array&&!x.Utilities.isReactNative())for(var g in I)if(I.hasOwnProperty(g)&&navigator.userAgent.match(I[g]))return void x.Utilities.log("Raygun4JS: cancelling send as error originates from an excluded user agent");if(x.Utilities.isReactNative()||!navigator.userAgent.match("RaygunPulseInsightsCrawler")){e.stack&&e.stack.length&&x.Utilities.forEach(e.stack,function(e,t){a.push({LineNumber:t.line,ColumnNumber:t.column,ClassName:"line "+t.line+", column "+t.column,FileName:t.url,MethodName:t.func||"[anonymous]"})});var p=x.Utilities.parseUrl("?");0<p.length&&x.Utilities.forEach(p.split("&"),function(e,t){var n=t.split("=");if(n&&2===n.length){var r=decodeURIComponent(n[0]),i=te(r,n[1]);o[r]=i}}),t===w&&(t={}),x.Utilities.isEmpty(t.customData)&&(t.customData="function"==typeof B?B():B),x.Utilities.isEmpty(t.tags)&&(t.tags="function"==typeof L?L():"string"==typeof L?[L]:L),n||(t.tags||(t.tags=[]),x.Utilities.contains(t.tags,"UnhandledException")||t.tags.push("UnhandledException")),x.Utilities.isReactNative()&&!x.Utilities.contains(t.tags,"React Native")&&t.tags.push("React Native");var h,m=k.screen||{width:x.Utilities.getViewPort().width,height:x.Utilities.getViewPort().height,colorDepth:8},v=t.customData&&t.customData.ajaxErrorMessage;h="customData"===M?ne(t.customData,"UserCustomData"):t.customData;try{JSON.stringify(h)}catch(e){var b="Cannot add custom data; may contain circular reference";h={error:b},x.Utilities.log("Raygun4JS: "+b)}var y,U=i;v?U=v:e.message?U=e.message:t&&t.status?U=t.status:"string"==typeof r&&(U=r),void 0===U&&(U=i),U&&"string"==typeof U&&(U=U.substring(0,512)),y=x.Utilities.isReactNative()?"/":[location.protocol,"//",location.host,location.pathname,location.hash].join("");var S={OccurredOn:new Date,Details:{Error:{ClassName:e.name,Message:U,StackTrace:a,StackString:e.stackstring},Environment:{UtcOffset:(new Date).getTimezoneOffset()/-60,"User-Language":navigator.userLanguage,"Document-Mode":x.Utilities.isReactNative()?"Not available":document.documentMode,"Browser-Width":x.Utilities.getViewPort().width,"Browser-Height":x.Utilities.getViewPort().height,"Screen-Width":m.width,"Screen-Height":m.height,"Color-Depth":m.colorDepth,Browser:navigator.appCodeName,"Browser-Name":navigator.appName,"Browser-Version":navigator.appVersion,Platform:navigator.platform},Client:{Name:"raygun-js",Version:"2.18.3"},UserCustomData:h,Tags:t.tags,Request:{Url:y,QueryString:o,Headers:{"User-Agent":navigator.userAgent,Referer:x.Utilities.isReactNative()?"Not available":document.referrer,Host:x.Utilities.isReactNative()?"Not available":document.domain}},Version:A||"Not supplied"}};if(S.Details.User=E,q.any())S.Details.Breadcrumbs=[],(q.all()||[]).forEach(function(e){e.metadata&&(e.CustomData=e.metadata,delete e.metadata),S.Details.Breadcrumbs.push(e)});if("all"===M&&(S=ne(S)),"function"==typeof T&&(x.Utilities.log("Raygun4JS: calling custom grouping key"),S.Details.GroupingKey=T(S,e,t)),"function"==typeof C){var R=C(S);R&&ae(R)}else ae(S)}}else j.push({stackTrace:e,options:t,userTriggered:n,error:r})}function ae(e){x.Utilities.isApiKeyConfigured()&&(x.Utilities.log("Sending exception data to Raygun:",e),oe(S+"/entries?apikey="+encodeURIComponent(x.Options._raygunApiKey),JSON.stringify(e)))}function oe(e,t,n,r){var i,a,o,s=(i="POST",a=e,"withCredentials"in(o=new k.XMLHttpRequest)||x.Utilities.isReactNative()?o.open(i,a,!0):k.XDomainRequest&&(g&&(a=a.slice(6)),(o=new k.XDomainRequest).open(i,a)),o.timeout=1e4,o);"function"==typeof s.setRequestHeader&&(s.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),void 0!==c&&s.setRequestHeader("X-Remote-Address",c)),"function"==typeof u&&u(s),x.Utilities.log("Is offline enabled? "+m),"withCredentials"in s||x.Utilities.isReactNative()?(s.onreadystatechange=function(){4===s.readyState&&(202===s.status?ee():m&&403!==s.status&&400!==s.status&&429!==s.status&&Z(e,t))},s.onload=function(){x.Utilities.log("posted to Raygun"),G(this),n&&"function"==typeof n&&n(s,e,t)}):k.XDomainRequest&&(s.ontimeout=function(){m&&(x.Utilities.log("Raygun: saved locally"),Z(e,t))},s.onload=function(){x.Utilities.log("posted to Raygun"),ee(),G(this),n&&"function"==typeof n&&n(s,e,t)}),s.onerror=function(){x.Utilities.log("failed to post to Raygun"),G(this),r&&"function"==typeof r&&r(s,e,t)},s?(x.Utilities.isReactNative()&&s.setRequestHeader("Content-type","application/json;charset=UTF-8"),s.send(t)):x.Utilities.log("CORS not supported")}return x=x.Utilities.mergeMutate(x,$),k.__raygunNoConflict||(k.Raygun=x),TraceKit.setRaygun(x),x};window.__instantiatedRaygun=raygunFactory(window,window.jQuery);var raygunRumFactory=function(V,e,W){W.RealUserMonitoring=function(e,t,c,n,r,i,a,o,s,u,l,d,f,g,p){var h=this,m={};this.cookieName="raygun4js-sid",this.apiKey=e,this.apiUrl=t,this.debugMode=s,this.excludedHostNames=a,this.excludedUserAgents=o,this.maxVirtualPageDuration=u||18e5,this.ignoreUrlCasing=l,this.customTimingsEnabled=d,this.beforeSend=f||function(e){return e},this.pendingPayloadData=d||!1,this.queuedPerformanceTimings=[],this.pendingVirtualPage=null,this.sessionId=null,this.virtualPage=null,this.user=n,this.version=r,this.tags=i,this.heartBeatInterval=null,this.heartBeatIntervalTime=3e4,this.offset=0,this._captureMissingRequests=p||!1,this.pageIsUnloading=!1,this.queuedItems=[],this.maxQueueItemsSent=50,this.setCookieAsSecure=g,this.xhrRequestMap={},this.xhrStatusMap={};var v={Page:"p",VirtualPage:"v",XHR:"x",CachedChildAsset:"e",ChildAsset:"c"};function b(){w({sessionId:h.sessionId,timestamp:(new Date).toISOString(),type:"session_start",user:h.user,version:h.version||"Not supplied",tags:h.tags,device:navigator.userAgent})}function y(e){return new Date(j(e,"timestamp"))<new Date(new Date-18e5)}function U(e){var t=function(e,t){if(!I("timing","object")||void 0===V.performance.timing.fetchStart||isNaN(V.performance.timing.fetchStart))return null;var n=[];t&&n.push(function(){var e=V.location.pathname;h.ignoreUrlCasing&&(e=e.toLowerCase());var t=V.location.protocol+"//"+V.location.host+e;800<t.length&&(t=t.substring(0,800));return{url:t,userAgent:navigator.userAgent,timing:function(){var e=V.performance.timing,t={du:e.duration,t:v.Page};t.a=e.fetchStart,e.domainLookupStart&&0<e.domainLookupStart&&(t.b=e.domainLookupStart-t.a);e.domainLookupEnd&&0<e.domainLookupEnd&&(t.c=e.domainLookupEnd-t.a);e.connectStart&&0<e.connectStart&&(t.d=e.connectStart-t.a);e.connectEnd&&0<e.connectEnd&&(t.e=e.connectEnd-t.a);e.responseStart&&0<e.responseStart&&(t.f=e.responseStart-t.a);e.responseEnd&&0<e.responseEnd&&(t.g=e.responseEnd-t.a);e.domLoading&&0<e.domLoading&&(t.h=e.domLoading-t.a);e.domInteractive&&0<e.domInteractive&&(t.i=e.domInteractive-t.a);e.domContentLoadedEventEnd&&0<e.domContentLoadedEventEnd&&(t.j=e.domContentLoadedEventEnd-t.a);e.domComplete&&0<e.domComplete&&(t.k=q(e.domComplete-t.a));e.loadEventStart&&0<e.loadEventStart&&(t.l=e.loadEventStart-t.a);e.loadEventEnd&&0<e.loadEventEnd&&(t.m=e.loadEventEnd-t.a);e.secureConnectionStart&&0<e.secureConnectionStart&&(t.n=e.secureConnectionStart-e.connectStart-t.a);return t=function(e){if(!I("getEntriesByName","function"))return e;var t=V.performance.getEntriesByName("first-paint");0<t.length&&0<t[0].startTime?e.fp=t[0].startTime.toFixed(2):V.performance.timing&&V.performance.timing.msFirstPaint&&(e.fp=(V.performance.timing.msFirstPaint-V.performance.timing.fetchStart).toFixed(2));var n=V.performance.getEntriesByName("first-contentful-paint");0<n.length&&0<n[0].startTime&&(e.fcp=n[0].startTime.toFixed(2));return e}(t=H(t))}(),size:0}}());C(n),e&&(n.push(function(e,t){h.ignoreUrlCasing&&(e=e.toLowerCase());-1!==e.indexOf("?")&&(e=e.split("?")[0]);var n=V.location.protocol+"//"+V.location.host+e;800<n.length&&(n=n.substring(0,800));return{url:n,userAgent:navigator.userAgent,timing:function(e){return{t:v.VirtualPage,startTime:e,staticLoad:h.initalStaticPageLoadTimestamp,pending:!0}}(t),size:0}}(e,M(0))),C(n,!0));return n}(h.virtualPage,e);null===t||t.length<0||A(t,!1)}function S(e){e&&k();var t=[];C(t,void 0,e),A(t,e)}function R(){var e,t;0<h.queuedItems.length&&(h.queuedItems=(e=h.queuedItems,t="timestamp",e.sort(function(a){return function(e,t){if(!e.hasOwnProperty(a)||!t.hasOwnProperty(a))return F('Raygun4JS: Property "'+a+'" not found in items in this collection'),0;var n=e[a],r=t[a],i=0;return r<n?i=1:n<r&&(i=-1),i}}(t))),x(h.queuedItems.splice(0,h.maxQueueItemsSent)))}function k(){for(var e,t,n,r=0;r<h.queuedPerformanceTimings.length;r++)(e=h.queuedPerformanceTimings[r]).timing.t===v.VirtualPage&&e.timing.pending&&(e.timing=(t=e.timing,n=M(0),{t:t.t,du:Math.min(h.maxVirtualPageDuration,n-t.startTime),o:Math.min(h.maxVirtualPageDuration,n-t.staticLoad)}))}function w(e){x([e])}function x(n){!function(e,t,n){"function"!=typeof t&&(t=function(){});"function"!=typeof n&&(n=function(){});!function(e,t,n,r){if(h.excludedUserAgents instanceof Array)for(var i in h.excludedUserAgents)if(h.excludedUserAgents.hasOwnProperty(i)&&navigator.userAgent.match(h.excludedUserAgents[i]))return F("Raygun4JS: cancelling send as error originates from an excluded user agent");if(h.excludedHostNames instanceof Array)for(var a in h.excludedHostNames)if(h.excludedHostNames.hasOwnProperty(a)&&V.location.hostname&&V.location.hostname.match(h.excludedHostNames[a]))return F("Raygun4JS: cancelling send as error originates from an excluded hostname");if(navigator.userAgent.match("RaygunPulseInsightsCrawler"))return;var o=h.beforeSend(t);if(!o)return F("Raygun4JS: cancelling send because onBeforeSendRUM returned falsy value");if(o.eventData)for(var s=0;s<o.eventData.length;s++)o.eventData[s].data&&"string"!=typeof o.eventData[s].data&&(o.eventData[s].data=JSON.stringify(o.eventData[s].data));var u=JSON.stringify(o);if(h.pageIsUnloading&&navigator.sendBeacon)return navigator.sendBeacon(e,u);c(e,u,n,r)}(h.apiUrl+"/events?apikey="+encodeURIComponent(h.apiKey),e,t,n)}({eventData:n},function(){F("Raygun4JS: Items sent successfully. Queue length: "+h.queuedItems.length)},function(e){var t;t=n,h.queuedItems=t.concat(h.queuedItems),F("Raygun4JS: Items failed to send. Queue length: "+h.queuedItems.length+" Response status code: "+e.status)})}function E(e){if(!h.pendingPayloadData||e){function t(){var e;o.push((e=a,{sessionId:h.sessionId,requestId:h.requestId,timestamp:(new Date).toISOString(),type:"web_request_timing",user:h.user,version:h.version||"Not supplied",device:navigator.userAgent,tags:h.tags,data:e})),s=!(a=[])}function n(){0<a.length&&t(),0<o.length&&(x(o),s=!(a=[]))}var r,i,a=[],o=[],s=!1;for(i=0;i<h.queuedPerformanceTimings.length;i++){var u=(r=h.queuedPerformanceTimings[i]).timing.t===v.Page||r.timing.t===v.VirtualPage;if(s&&u&&t(),0<a.length&&u&&t(),u&&(h.requestId=D(16)),r.timing.t===v.VirtualPage&&r.timing.pending)return n(),void h.queuedPerformanceTimings.splice(0,i);a.push(r),s=s||r.timing.t===v.Page||r.timing.t===v.VirtualPage}n(),h.queuedPerformanceTimings=[]}}function A(e,t){h.queuedPerformanceTimings=h.queuedPerformanceTimings.concat(e),E(t)}function C(e,t,n){var r;if(I("getEntries","function"))try{var i,a=t?0:V.performance.timing.navigationStart,o=V.performance.getEntries();for(i=h.offset;i<o.length&&(n||!N(o[i]));i++)r=o[i],L(r.name.split("?")[0])||"paint"===r.entryType||e.push(B(o[i],a));h.offset=i,this._captureMissingRequests&&T(e,a)}catch(e){F(e)}}this.attach=function(){!function(e){var t=P(),n=null===t,r=!1;n||(r=y(t));if(n||r)h.sessionId=D(32),_(h.sessionId),e(!0);else{var i=j(t,"id");_(i),h.sessionId=i,e(!1)}}(function(e){h.pageLoaded(e)});var e=function(){this.updateStorageTimestamp()}.bind(m),t=function(){S(h.pageIsUnloading=!0),R()}.bind(m),n=function(){"visible"===document.visibilityState&&this.updateStorageTimestamp()}.bind(m);V.addEventListener?(V.addEventListener("click",e),document.addEventListener("visibilitychange",n),V.addEventListener("beforeunload",t)):V.attachEvent&&document.attachEvent("onclick",e),W.NetworkTracking.on("request",function(e){this.xhrRequestMap[e.baseUrl]||(this.xhrRequestMap[e.baseUrl]=[]);F("adding request to xhr request map",e),this.xhrRequestMap[e.baseUrl].push(e)}.bind(this)),W.NetworkTracking.on("error",function(e){var t=this.xhrRequestMap[e.baseUrl];t&&0<t.length&&(this.xhrRequestMap[e.baseUrl].shift(),F("request encountered an error",e))}.bind(this)),W.NetworkTracking.on("response",function(e){var t=this.xhrRequestMap[e.baseUrl];t&&0<t.length?(this.xhrRequestMap[e.baseUrl].shift(),0===this.xhrRequestMap[e.baseUrl].length&&delete this.xhrRequestMap[e.baseUrl],this.xhrStatusMap[e.baseUrl]||(this.xhrStatusMap[e.baseUrl]=[]),F("adding response to xhr status map",e),this.xhrStatusMap[e.baseUrl].push(e)):F("response fired from non-handled request")}.bind(this))},this.pageLoaded=function(e){e&&b(),U(!0),function(){if(null!==h.heartBeatInterval)return F("Raygun4JS: Heartbeat already exists. Skipping heartbeat creation.");h.heartBeatInterval=setInterval(function(){S(),R()},h.heartBeatIntervalTime)}(),h.initalStaticPageLoadTimestamp=M(0)},this.virtualPageLoaded=function(e){"string"==typeof e&&(0<e.length&&"/"!==e[0]&&(e+="/"),800<e.length&&(e=e.substring(0,800)),this.virtualPage=e),k(),U(!1)},this.setUser=function(e){h.user=e},this.withTags=function(e){h.tags=e},this.endSession=function(){w({sessionId:h.sessionId,requestId:h.requestId,timestamp:(new Date).toISOString(),type:"session_end"})},this.sendCustomTimings=function(e){"object"!=typeof e||"number"!=typeof e.custom1&&"number"!=typeof e.custom2&&"number"!=typeof e.custom3&&"number"!=typeof e.custom4&&"number"!=typeof e.custom5&&"number"!=typeof e.custom6&&"number"!=typeof e.custom7&&"number"!=typeof e.custom8&&"number"!=typeof e.custom9&&"number"!=typeof e.custom10||h.pendingPayloadData&&0<h.queuedPerformanceTimings.length&&(h.pendingPayloadData=!1,h.queuedPerformanceTimings[0].customTiming=e,E())},this.captureMissingRequests=function(e){this._captureMissingRequests=e};var T=function(e,t){for(var n in F("checking for missing WRT data",this.xhrStatusMap),this.xhrStatusMap)if(this.xhrStatusMap.hasOwnProperty(n)){var r=this.xhrStatusMap[n];if(r&&0<r.length)do{var i=r.shift();F("checking response",i),L(i.baseUrl)||(F("adding missing WRT data for url"),e.push({url:i.baseUrl,statusCode:i.status,timing:{du:q(i.duration).toFixed(2),a:t.toFixed(2),t:v.XHR}}))}while(0<r.length);delete this.xhrStatusMap[n]}}.bind(this);var O=function(e){var t=e.name.split("?")[0];return h.ignoreUrlCasing&&(t=t.toLowerCase()),800<t.length&&(t=t.substring(0,800)),t}.bind(this),N=function(e){var t=O(e),n=this.xhrRequestMap[t];return n&&0<n.length}.bind(this),B=function(e,t){var n=O(e),r={url:n,timing:function(e,t){var n={du:q(e.duration).toFixed(2),t:function(e){return function(e){return"xmlhttprequest"===e||"fetch"===e||"preflight"===e||"beacon"===e}(e.initiatorType)?v.XHR:function(e){switch(e.initiatorType){case"img":case"css":case"script":case"link":case"other":case"use":return 1}return}(e)?X(e):function(e){return"string"==typeof e.initiatorType&&""===e.initiatorType}(e)?v.XHR:X(e)}(e),a:t+e.fetchStart};e.domainLookupStart&&0<e.domainLookupStart&&(n.b=t+e.domainLookupStart-n.a);e.domainLookupEnd&&0<e.domainLookupEnd&&(n.c=t+e.domainLookupEnd-n.a);e.connectStart&&0<e.connectStart&&(n.d=t+e.connectStart-n.a);e.connectEnd&&0<e.connectEnd&&(n.e=t+e.connectEnd-n.a);e.responseStart&&0<e.responseStart&&(n.f=t+e.responseStart-n.a);e.responseEnd&&0<e.responseEnd&&(n.g=t+e.responseEnd-n.a);e.secureConnectionStart&&0<e.secureConnectionStart&&(n.n=t+(e.secureConnectionStart-e.connectStart)-n.a);return n.a=n.a.toFixed(2),n=H(n)}(e,t),size:e.decodedBodySize||0};F("retrieving secondary timing data for",e.name);var i=this.xhrStatusMap[n];return i&&0<i.length?(r.statusCode=this.xhrStatusMap[n].shift().status,F("found status for timing",r.statusCode),0===this.xhrStatusMap[n].length&&delete this.xhrStatusMap[n]):F("no status found for timing",this.xhrStatusMap),r}.bind(this);function L(e){return 0===e.indexOf(h.apiUrl)||(0<e.indexOf("favicon.ico")||(0===e.indexOf("about:blank")||("j"===e[0]&&1===e.indexOf("avascript:")||(0===e.indexOf("chrome-extension://")||(0===e.indexOf("res://")||0===e.indexOf("file://"))))))}function H(e){for(var t in e)isNaN(e[t])&&"string"!=typeof e[t]&&(e[t]=0);return e}function D(e){return Math.round(Math.pow(36,e+1)-Math.random()*Math.pow(36,e)).toString(36).slice(1)}function I(e,t){return"object"==typeof V.performance&&(!e||e&&typeof V.performance[e]===t)}function M(e){return I("now","function")?V.performance.now():e}function q(e){return Math.min(e,3e5)}function F(e,t){h.debugMode&&V.console&&V.console.log&&(t?V.console.log(e,t):V.console.log(e))}function _(e){var t="id|"+e+"&timestamp|"+(new Date).toISOString();W.Utilities.localStorageAvailable()?localStorage.setItem(h.cookieName,t):W.Utilities.createCookie(h.cookieName,t,null,h.setCookieAsSecure)}function P(){var e;return W.Utilities.localStorageAvailable()&&null!==(e=localStorage.getItem(h.cookieName))||(W.Utilities.sessionStorageAvailable()&&null!==(e=sessionStorage.getItem(h.cookieName))?_(e):null!==(e=W.Utilities.readCookie(h.cookieName))&&W.Utilities.localStorageAvailable()&&(W.Utilities.clearCookie(h.cookieName),localStorage.setItem(h.cookieName,e))),e}function j(e,t){var n=e.split(/[|&]/);return"id"===t?n[1]:"timestamp"===t?n[3]:void 0}function X(e){return 0===e.duration?v.CachedChildAsset:v.ChildAsset}m.updateStorageTimestamp=function(){var e=P(),t=!1;e&&(t=y(e)),!t&&e||(h.sessionId=D(32)),_(h.sessionId),t&&b()}}};raygunRumFactory(window,window.jQuery,window.__instantiatedRaygun),function(r,i){if(r.RaygunObject&&r[r.RaygunObject]){var a,o,s,u,c,l,d=r[r.RaygunObject].o,f=!1,g=[],p=["function (b,c,d,f,g){","||(g=new Error(b)),a[e].q=a[e].q||[]"];a=r[r.RaygunObject].q;function h(){r[r.RaygunObject]=function(){return b(arguments)},f=!0}var m=i,v=["trackEvent","send","recordBreadcrumb"],b=function(e){var t=e[0],n=e[1];if(t)switch(t){case"boot":y();break;case"noConflict":l=n;break;case"apiKey":o=n,0;break;case"options":s=n;break;case"attach":case"enableCrashReporting":u=n,0;break;case"enablePulse":c=n,0;break;case"detach":m.detach();break;case"getRaygunInstance":return m;case"setUser":m.setUser(n.identifier,n.isAnonymous,n.email,n.fullName,n.firstName,n.uuid);break;case"onBeforeSend":m.onBeforeSend(n);break;case"onBeforeSendRUM":m.onBeforeSendRum(n);break;case"onBeforeXHR":m.onBeforeXHR(n);break;case"onAfterSend":m.onAfterSend(n);break;case"withCustomData":m.withCustomData(n);break;case"withTags":m.withTags(n);break;case"setVersion":m.setVersion(n);break;case"filterSensitiveData":m.filterSensitiveData(n);break;case"setFilterScope":m.setFilterScope(n);break;case"whitelistCrossOriginDomains":m.whitelistCrossOriginDomains(n);break;case"saveIfOffline":"boolean"==typeof n&&m.saveIfOffline(n);break;case"groupingKey":m.groupingKey(n);break;case"send":var r,i,a;n.error?(r=n.error,n.tags&&(i=n.tags),n.customData&&(a=n.customData)):r=n,m.send(r,a,i);break;case"trackEvent":n.type&&n.path?m.trackEvent(n.type,{path:n.path}):n.type&&n.timings&&m.trackEvent(n.type,{timings:n.timings});break;case"recordBreadcrumb":m.recordBreadcrumb(e[1],e[2]);break;case"enableAutoBreadcrumbs":m.enableAutoBreadcrumbs();break;case"disableAutoBreadcrumbs":m.disableAutoBreadcrumbs();break;case"enableAutoBreadcrumbsConsole":m.enableAutoBreadcrumbs("Console");break;case"disableAutoBreadcrumbsConsole":m.disableAutoBreadcrumbs("Console");break;case"enableAutoBreadcrumbsNavigation":m.enableAutoBreadcrumbs("Navigation");break;case"disableAutoBreadcrumbsNavigation":m.disableAutoBreadcrumbs("Navigation");break;case"enableAutoBreadcrumbsClicks":m.enableAutoBreadcrumbs("Clicks");break;case"disableAutoBreadcrumbsClicks":m.disableAutoBreadcrumbs("Clicks");break;case"enableAutoBreadcrumbsXHR":m.enableAutoBreadcrumbs("XHR");break;case"disableAutoBreadcrumbsXHR":m.disableAutoBreadcrumbs("XHR");break;case"setBreadcrumbLevel":m.setBreadcrumbOption("breadcrumbsLevel",e[1]);break;case"setAutoBreadcrumbsXHRIgnoredHosts":m.setBreadcrumbOption("xhrIgnoredHosts",e[1]);break;case"logContentsOfXhrCalls":m.setBreadcrumbOption("logXhrContents",e[1]);break;case"clientIp":m.setClientIp(n);break;case"captureMissingRequests":m.captureMissingRequests(n);break;case"captureUnhandledRejections":0}},y=function(){if(!function(){for(var e in d=r[r.RaygunObject].o)if(d.hasOwnProperty(e)){var t=d[e];t&&(-1===v.indexOf(t[0])?b(t):g.push(t))}}(),l&&(m=i.noConflict()),o&&(s=s||{},c&&(s.disablePulse=!1),s.from="onLoad",m.init(o,s,null)),u)for(var e in m.attach(),a=r[r.RaygunObject].q)m.send(a[e].e,{handler:"From Raygun4JS snippet global error handler"});else if("function"==typeof r.onerror){var t=r.onerror.toString();-1!==t.indexOf(p[0])&&-1!==t.indexOf(p[1])&&(r.onerror=null)}for(var n in g)g.hasOwnProperty(n)&&b(g[n]);g=[],f||h(),r[r.RaygunObject].q=a};i.Utilities.isReactNative()?h():"complete"===document.readyState?y():r.addEventListener?r.addEventListener("load",y):r.attachEvent("onload",y)}}(window,window.__instantiatedRaygun);try{delete window.__instantiatedRaygun}catch(e){window.__instantiatedRaygun=void 0}
//# sourceMappingURL=raygun.min.js.map